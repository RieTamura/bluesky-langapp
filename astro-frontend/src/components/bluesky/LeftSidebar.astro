---
// Left sidebar with user info and settings (blue border area)
---

<aside class="h-screen sticky top-14 p-4 bg-white border-r border-blue-200">
  <!-- User Profile Section (Blue Border) -->
  <div class="border-2 border-blue-400 rounded-lg p-4 mb-6 bg-blue-50">
    <h2 class="text-lg font-semibold text-blue-800 mb-4 flex items-center">
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg>
      個人情報
    </h2>
    
    <!-- User Avatar and Info -->
    <div class="flex items-center space-x-3 mb-4">
      <div class="w-12 h-12 bg-blue-200 rounded-full flex items-center justify-center">
        <span class="text-blue-600 text-lg">👤</span>
      </div>
      <div>
        <div class="font-medium text-gray-900" id="userDisplayName">ユーザー名</div>
        <div class="text-sm text-gray-500" id="userHandle">@handle.bsky.social</div>
      </div>
    </div>
    
    <!-- User Stats -->
    <div class="grid grid-cols-2 gap-3 mb-4">
      <div class="text-center p-2 bg-white rounded border">
        <div class="text-lg font-semibold text-blue-600" id="totalWords">0</div>
        <div class="text-xs text-gray-600">学習単語</div>
      </div>
      <div class="text-center p-2 bg-white rounded border">
        <div class="text-lg font-semibold text-green-600" id="knownWords">0</div>
        <div class="text-xs text-gray-600">習得済み</div>
      </div>
    </div>
    
    <!-- Settings Button -->
    <button class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md text-sm font-medium transition-colors">
      設定
    </button>
  </div>
  
  <!-- Navigation Menu -->
  <nav class="space-y-2">
    <a href="/dashboard" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors" data-page="dashboard">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
      </svg>
      <span>ホーム</span>
    </a>
    
    <a href="/posts" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors" data-page="posts">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
      </svg>
      <span>検索</span>
    </a>
    
    <a href="/notifications" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z"></path>
      </svg>
      <span>通知</span>
    </a>
    
    <a href="/messages" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
      </svg>
      <span>チャット</span>
    </a>
    
    <a href="/feeds" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2m-9 0h10m-10 0a2 2 0 00-2 2v14a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2H7z"></path>
      </svg>
      <span>フィード</span>
    </a>
    
    <a href="/lists" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
      </svg>
      <span>リスト</span>
    </a>
    
    <a href="/profile" class="nav-item flex items-center space-x-3 px-3 py-2 rounded-md text-gray-700 hover:bg-gray-100 transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg>
      <span>プロフィール</span>
    </a>
  </nav>
  
  <!-- Logout Button -->
  <div class="mt-8 pt-4 border-t border-gray-200">
    <button id="logoutBtn" class="w-full flex items-center justify-center space-x-2 px-3 py-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors">
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
      </svg>
      <span>ログアウト</span>
    </button>
  </div>
</aside>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Logout functionality
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', () => {
        localStorage.removeItem('sessionId');
        localStorage.removeItem('userIdentifier');
        window.location.href = '/';
      });
    }

    // Load user info
    const sessionId = localStorage.getItem('sessionId');
    const userIdentifier = localStorage.getItem('userIdentifier');
    
    if (userIdentifier) {
      const userDisplayName = document.getElementById('userDisplayName');
      const userHandle = document.getElementById('userHandle');
      
      if (userDisplayName) userDisplayName.textContent = userIdentifier;
      if (userHandle) userHandle.textContent = `@${userIdentifier}`;
    }

    // Set active navigation item
    const currentPath = window.location.pathname;
    const navItems = document.querySelectorAll('.nav-item');
    navItems.forEach(item => {
      const page = item.getAttribute('data-page');
      if (currentPath.includes(page) || (currentPath === '/' && page === 'dashboard')) {
        item.classList.add('bg-blue-100', 'text-blue-700');
      }
    });
  });
</script>